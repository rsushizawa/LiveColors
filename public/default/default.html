<!DOCTYPE html>
<html lang="pt-br">
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML with Query Parameters from Original Request</title>
    <link rel="stylesheet" href="default.css">
</head>
<body>
    <footer class="menu" id="menu">
        <img src="assets/logo.svg" alt="logo"> 
        <div class="menu_right">
            <a href="">One</a> 
            <a href="">Two</a> 
            <a href="">Three</a> 
            <a href="">Four</a>
            <button class="button_white">Button</button>
            <button class="button_black">Button</button>
        </div>
    </footer>
    <div class="edit" style="text-align:center">
        <footer class="edit_hud" id="edit_hud">
            <button class="select_window" id="select_window"><img class="select_window" src="assets/select_window.svg" alt="select_window"></button>
            <button class="font_color" id="font_color">Text</button>
            <button class="background_color" id="background_color" style="width: 159px;">Background</button>
            <button class="primary_color" id="primary_color">Primary</button>
            <button class="secondary_color" id="secondary_color" style="width: 133px;">Secondary</button>
            <button class="accent_color" id="accent_color" style="width: 106px;">Accent</button>
            <button class="dark_mode_button" id="dark_mode"><svg class="dark_mode" width="29" height="29" viewBox="0 0 29 29" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M14.5 28.25C12.5979 28.25 10.8104 27.8891 9.1375 27.1672C7.46458 26.4453 6.00938 25.4656 4.77187 24.2281C3.53437 22.9906 2.55469 21.5354 1.83281 19.8625C1.11094 18.1896 0.75 16.4021 0.75 14.5C0.75 12.5979 1.11094 10.8104 1.83281 9.1375C2.55469 7.46458 3.53437 6.00938 4.77187 4.77187C6.00938 3.53437 7.46458 2.55469 9.1375 1.83281C10.8104 1.11094 12.5979 0.75 14.5 0.75C16.4021 0.75 18.1896 1.11094 19.8625 1.83281C21.5354 2.55469 22.9906 3.53437 24.2281 4.77187C25.4656 6.00938 26.4453 7.46458 27.1672 9.1375C27.8891 10.8104 28.25 12.5979 28.25 14.5C28.25 16.4021 27.8891 18.1896 27.1672 19.8625C26.4453 21.5354 25.4656 22.9906 24.2281 24.2281C22.9906 25.4656 21.5354 26.4453 19.8625 27.1672C18.1896 27.8891 16.4021 28.25 14.5 28.25ZM15.875 25.3969C18.6021 25.0531 20.888 23.8557 22.7328 21.8047C24.5776 19.7536 25.5 17.3188 25.5 14.5C25.5 11.6812 24.5776 9.24635 22.7328 7.19531C20.888 5.14427 18.6021 3.94688 15.875 3.60313V25.3969Z" fill="var(--background)"/>
                </svg>
            </button>
            <button class="randomize" id="randomize" style="width: 80px;"><img class="randomize" src="assets/randomize.svg" alt="randomize"> <img src="assets/segment.svg" alt="segment"> <img class="arrow_top" src="assets/arrow_top.svg" alt="arrow_top"></button>
            <button class="button1" id="undo"><img class="undo" src="assets/undo.svg" alt="undo"></button>
            <button class="button1" id="redo"><img class="redo" src="assets/redo.svg" alt="redo"></button>
            <button class="select_fonts" id="select_fonts" style="width: 92px;">Fonts</button>
            <button class="button1" id="share"><img class="share" src="assets/share.svg" alt="share"></button>
            <button class="button1" id="visibility"><img class="visibility" src="assets/visibility.svg" alt="visibility"></button>
        </footer>
    </div>
    <div class="intro" id="intro">
        <h2>Medium length hero headline goes here</h2>
        <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Amet accusamus et maxime nostrum officia assumenda mollitia nam totam numquam libero est magnam ipsa sint, blanditiis animi tempora aut possimus iste.</p>
        <button class="button_white">Button</button>
        <button class="button_black">Button</button>
    </div>
    <div class="jsonData">
        <h1>HTML Page with JSON and Query Parameters</h1>
        <div id="jsonData"> Update query</div>
        <button onclick="updateQueryStringParameter('color', 'green')">Update</button>
        <button onclick="getQueryParamsJSON()">Get</button>
        <script>
            // função que separa os parametros query da pagina
            function getQueryParams() {
                const urlParams = new URLSearchParams(window.location.search);
                let query = {};
                for (const [key, value] of urlParams.entries()) {
                    query[key] = value;
                }
                return query;
            }
            //função que atualiza os parametros query sem recarrgar a pagina
            function updateQueryStringParameter(paramName, paramValue) {
                const url = new URL(window.location.href);
                url.searchParams.set(paramName, paramValue);
                window.history.pushState({}, '', url);
            }

            // função que faz uma request para receber os parametros query em formato JSON
            function getQueryParamsJSON(){
                const queryParams = new URLSearchParams(window.location.search); // pega os parametros do link de busca
                fetch('/data?' + queryParams.toString())
                    .then(response => response.json())
                    .then(data => {
                        document.getElementById('jsonData').innerHTML = JSON.stringify(data);
                    });
            }
        </script>
    </div>

</body>
</html>     